import{r as i,j as e,u as D}from"./index-CvHj2RZ1.js";import{H as N,F as b}from"./Header-B_kp4QE1.js";import{R as P}from"./react-paginate-DtMYSAmB.js";import{I as v}from"./ItemsData-CIqc31K7.js";import"./watch-time-heart-svgrepo-com-D13DZejb.js";const M="_ArticleContainer_Shop_6fvhe_7",E="_SubContainer_Shop_6fvhe_11",S={ArticleContainer_Shop:M,SubContainer_Shop:E},k="_AsideDiv_1ugas_1",F="_SubAsideContainer_1ugas_12",O="_ContainerItems_1ugas_25",J="_ItemsContent_1ugas_31",T="_Item_1ugas_31",w="_DivButtonsItems_1ugas_85",B="_ItemPrice_1ugas_97",H="_PaginationDiv_1ugas_125",L="_EmpDiv_1ugas_155",n={AsideDiv:k,SubAsideContainer:F,ContainerItems:O,ItemsContent:J,Item:T,DivButtonsItems:w,ItemPrice:B,PaginationDiv:H,EmpDiv:L};function $({SetRunlocal:c}){const[r,d]=i.useState([]),[x,g]=i.useState(0),[m,o]=i.useState([]),h=5,p=({selected:t})=>{g(t)};i.useEffect(()=>{let t=localStorage.getItem("ItemsInventory"),s=[];try{s=t?JSON.parse(t):[],s=Array.isArray(s)?s:[]}catch{s=[]}d(s),c(!0)},[]),i.useEffect(()=>{if(!Array.isArray(r)||r.length===0){o([]);return}const t=x*h,a=r.slice(t,t+h).map(l=>{const u=v.find(f=>f.id===l.ID);return u?{...u,count:l.Cantidad}:null}).filter(l=>l!==null);o(a),c(!0)},[r,x]);function y(t){const s=Array.isArray(r)?r.map(a=>a.ID===t?{...a,Cantidad:a.Cantidad+1}:a):[];d(s),localStorage.setItem("ItemsInventory",JSON.stringify(s)),c(!0)}function C(t){const s=Array.isArray(r)?r.map(a=>a.ID===t?{...a,Cantidad:a.Cantidad-1}:a):[];d(s),localStorage.setItem("ItemsInventory",JSON.stringify(s)),c(!0)}function I(t){const s=Array.isArray(r)?r.filter(a=>a.ID!==t):[];d(s),localStorage.setItem("ItemsInventory",JSON.stringify(s)),c(!0)}const j=Array.isArray(r)?Math.ceil(r.length/h):0;return e.jsxs("aside",{className:n.AsideDiv,children:[e.jsx("div",{className:n.SubAsideContainer,children:Array.isArray(m)&&m.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Shopping Cart"}),e.jsx("br",{}),m.map((t,s)=>e.jsx("div",{className:n.ContainerItems,children:e.jsxs("div",{className:n.ItemsContent,children:[e.jsxs("div",{className:n.Item,children:[e.jsx("img",{src:t.img,alt:""}),e.jsxs("h3",{children:[t.produto," ",e.jsx("br",{}),e.jsx("span",{children:t.description})]}),e.jsx("br",{}),e.jsxs("div",{className:n.DivButtonsItems,children:[e.jsx("button",{disabled:t.count===0,onClick:()=>C(t.id),children:"-"}),e.jsx("span",{children:t.count}),e.jsx("button",{disabled:t.precio*t.count>=1e5,onClick:()=>y(t.id),children:"+"})]})]}),e.jsxs("div",{className:n.ItemPrice,children:[e.jsxs("span",{children:["$",t.precio*t.count]}),e.jsx("button",{onClick:()=>I(t.id),children:e.jsx("i",{className:"fa-solid fa-trash"})})]})]})},s))]}):e.jsxs("div",{className:n.EmpDiv,children:[e.jsx("i",{className:"fa-solid fa-cart-shopping"}),e.jsx("h3",{children:"Your Cart is Empty"}),e.jsx("p",{children:"Looks like you haven't added any exquisite timepieces yet."})]})}),Array.isArray(m)&&m.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:n.PaginationDiv,children:e.jsx(P,{previousLabel:"← Anterior",nextLabel:"Siguiente →",breakLabel:"...",pageCount:j,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:p,containerClassName:n.pagination,activeClassName:n.active})})}):e.jsx(e.Fragment,{})]})}const V="_AsideMiniCart_7rvu8_7",Y="_MiniCart_7rvu8_12",q="_ContainerCart_7rvu8_15",R="_MiniCart_Prices_7rvu8_30",z="_MiniCart_PricesTotal_7rvu8_64",_={AsideMiniCart:V,MiniCart:Y,ContainerCart:q,MiniCart_Prices:R,MiniCart_PricesTotal:z};function G({RunLocal:c,SetRunlocal:r}){const[d,x]=i.useState([]),[g]=i.useState(Array.isArray(v)?v:[]),m=D(),[o,h]=i.useState(()=>{try{const t=localStorage.getItem("ItemsInventory"),s=t?JSON.parse(t):[];return Array.isArray(s)?s:[]}catch{return[]}}),[p,y]=i.useState(Array.isArray(o)&&o.length>0),[C,I]=i.useState(0);i.useEffect(()=>{let t=[];try{const s=localStorage.getItem("ItemsInventory");t=s?JSON.parse(s):[],t=Array.isArray(t)?t:[]}catch{t=[]}h(t),y(Array.isArray(t)&&t.length>0),c&&r(!1)},[c,r]),i.useEffect(()=>{if(!Array.isArray(o)||!Array.isArray(g)){I(0),y(!1);return}const t=o.reduce((s,a)=>{if(!a||typeof a.ID>"u"||typeof a.Cantidad>"u")return s;const l=g.find(A=>A.id===a.ID),u=l?Number(l.precio):0,f=Number(a.Cantidad)||0;return s+u*f},0);I(t),y(o.length>0)},[o,g]);function j(t){let s=[];try{const u=localStorage.getItem("DataHistory");s=u?JSON.parse(u):[],s=Array.isArray(s)?s:[]}catch{s=[]}const a={HistoryID:s.length+1,items:o,subtotal:C,date:new Date().toISOString()},l=[...s,a];localStorage.setItem("DataHistory",JSON.stringify(l)),localStorage.removeItem("ItemsInventory"),h([]),y(!1),I(0),alert("Thank you for your purchase! Your order has been placed successfully."),m("/Profile")}return e.jsx(e.Fragment,{children:p&&e.jsx("aside",{className:_.AsideMiniCart,children:e.jsx("div",{className:_.MiniCart,children:e.jsxs("div",{className:_.ContainerCart,children:[e.jsx("h3",{children:"Order Summary"}),e.jsx("br",{}),e.jsxs("div",{className:_.MiniCart_Prices,children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("span",{children:["$",C.toFixed(2)]})]}),e.jsxs("div",{className:_.MiniCart_Prices,children:[e.jsx("p",{children:"Taxes (12%)"}),e.jsxs("span",{children:["$",(C*.12).toFixed(2)]})]}),e.jsx("br",{}),e.jsxs("div",{className:_.MiniCart_PricesTotal,children:[e.jsx("p",{children:"Total"}),e.jsxs("span",{children:["$",(C*1.12).toFixed(2)]})]}),e.jsx("br",{}),e.jsxs("button",{onClick:j,children:["Proceed to Checkout ",e.jsx("i",{className:"fa-solid fa-arrow-right"})]})]})})})})}function Z(c){const[r,d]=i.useState(!1);return e.jsxs("article",{className:S.ArticleContainer_Shop,children:[e.jsx(N,{}),e.jsxs("div",{className:S.SubContainer_Shop,children:[e.jsx($,{RunLocal:r,SetRunlocal:d}),e.jsx(G,{RunLocal:r,SetRunlocal:d})]}),e.jsx(b,{})]})}export{Z as default};
